import{d as U,r,e as B,I as F,o as u,c as C,f as t,w as a,u as e,g as y,s as g,v as x,q as I,t as $,E as R,j as G,i as M,Z as z,k as O,l as Q,x as N,z as D,B as S,p as Y,a as Z,b as J,_ as H,n as K,C as W,D as X,F as ee}from"./entry.7a5a578c.js";/* empty css                        *//* empty css                 *//* empty css                *//* empty css                  *//* empty css                 *//* empty css               */import"./el-tooltip.4ed993c7.js";/* empty css                     *//* empty css                   */import{P as te,Q as oe}from"./adminManage.defe7474.js";import{t as ae}from"./throttle.46d02480.js";import{a as P}from"./index.a0298ae1.js";/* empty css                */import"./request.c0233501.js";const le=b=>(Y("data-v-fd99cc3e"),b=b(),Z(),b),ne={class:"text-[#EBEBEB] pt-10"},se={class:"cursor-pointer hover:text-[#ebebeb]"},ce=le(()=>J("span",{class:"iconfont icon-icon-copy"},null,-1)),ie=U({__name:"Box",setup(b){const l=r(!1),n=r(!1),m=r(),o=r(),d=B({content:[]}),i=r(),h=B({number:[{required:!0,message:"Please enter the ticket box count",trigger:"blur"}]}),s=B({number:null,activity:!1}),E=c=>{c&&c.resetFields()},_=async c=>{c&&(n.value||await c.validate(async(p,A)=>{if(p)try{n.value=!0;const f=await te({number:s.number,activity:s.activity}),{cdkeys:V,activity:w}=f.data;o.value=w,f.code===200?(R.success({message:"Created successfully",grouping:!0,type:"success"}),d.content=V.map(([k,T])=>({cdkey:k,numberOfTimes:T})),m.value=d.content.map(k=>k.cdkey).join(`
`)):R.error({message:f.msg,grouping:!0,type:"error"})}catch{}finally{n.value=!1,E(c)}}))};return(c,p)=>{const A=G,f=M,V=z,w=O,k=Q,T=N,j=D,L=F("copy"),q=S;return u(),C("div",ne,[t(k,{ref_key:"ruleFormRef",ref:i,inline:!1,"label-position":"right","label-width":"200px",model:e(s),rules:e(h),class:"flex w-fit"},{default:a(()=>[t(f,{label:"Ticket Box Count:",prop:"number"},{default:a(()=>[t(A,{min:1,max:200,style:{width:"240px"},"controls-position":"right",modelValue:e(s).number,"onUpdate:modelValue":p[0]||(p[0]=v=>e(s).number=v),placeholder:"Please enter the number of ticket boxes to create",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{label:"Generate Activity Code:",prop:"activity"},{default:a(()=>[t(V,{modelValue:e(s).activity,"onUpdate:modelValue":p[1]||(p[1]=v=>e(s).activity=v),class:"ml-2","active-text":"Yes","inline-prompt":"","inactive-text":"No",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),t(w,{type:"success",loading:e(n),class:"ml-3",onClick:p[2]||(p[2]=v=>("throttle"in c?c.throttle:e(ae))(()=>{_(e(i))}))},{default:a(()=>[y(" Create ")]),_:1},8,["loading"]),g((u(),x(w,{type:"primary"},{default:a(()=>[y(" Copy all ticket box cdkeys ")]),_:1})),[[L,e(m)]]),e(o)?g((u(),x(w,{key:0,type:"primary"},{default:a(()=>[y(" Copy activity code ")]),_:1})),[[L,`${("getJumpURL"in c?c.getJumpURL:e(P))()}/trainingTickets/ticket?activity=${e(o)}`]]):I("",!0)]),_:1},8,["model","rules"]),g((u(),x(j,{ref:"multipleTableRef",height:"650px",data:e(d).content,border:""},{default:a(()=>[t(T,{prop:"cdkey",label:"cdkey",align:"center"},{default:a(v=>[g((u(),C("div",se,[y($(v.row.cdkey)+" ",1),ce])),[[L,v.row.cdkey]])]),_:1}),t(T,{prop:"numberOfTimes",label:"Times",align:"center"})]),_:1},8,["data"])),[[q,e(l)]])])}}});const re=H(ie,[["__scopeId","data-v-fd99cc3e"]]),ue={class:"w-full h-[85vh] flex flex-col justify-between space-y-5 p-5"},pe={class:"cursor-pointer hover:text-[#ebebeb]"},me=J("span",{class:"iconfont icon-icon-copy"},null,-1),de=U({__name:"ActivityList",setup(b){r(!1);const l=r(!1);r(!1),r();const n=B({content:[]}),m=async()=>{try{l.value=!0;const o=await oe();l.value=!1,o.code===200?(n.content=o.data,n.totalElements=o.total):(n.content=[],n.totalElements=0,R({message:o.msg,grouping:!0,type:"error"}))}catch{l.value=!1}};return K(()=>{m()}),(o,d)=>{const i=N,h=D,s=F("copy"),E=S;return u(),C("div",ue,[g((u(),x(h,{ref:"multipleTableRef",class:"w-full flex-1",data:e(n).content,border:""},{default:a(()=>[t(i,{label:"Time",prop:"created_time",align:"center","show-overflow-tooltip":""}),t(i,{label:"Activity Code",prop:"activity",align:"center","show-overflow-tooltip":""},{default:a(_=>[g((u(),C("div",pe,[y($(_.row.activity)+" ",1),me])),[[s,`${("getJumpURL"in o?o.getJumpURL:e(P))()}/trainingTickets?activity=${_.row.activity}`]])]),_:1}),t(i,{label:"Total",prop:"count",align:"center","show-overflow-tooltip":""}),t(i,{label:"Used",prop:"used",align:"center","show-overflow-tooltip":""}),t(i,{label:"Unused",prop:"count",align:"center","show-overflow-tooltip":""},{default:a(_=>[y($(_.row.count-_.row.used),1)]),_:1})]),_:1},8,["data"])),[[E,e(l)]])])}}}),_e={class:"w-full h-full flex flex-col space-y-2 p-6"},$e=U({__name:"ticket-box",setup(b){const l=r("2");return(n,m)=>{const o=re,d=X,i=de,h=ee;return u(),C("div",_e,[t(h,{modelValue:e(l),"onUpdate:modelValue":m[0]||(m[0]=s=>W(l)?l.value=s:null),class:"w-full h-full bg-black"},{default:a(()=>[t(d,{label:"Create ticket box",name:"2"},{default:a(()=>[t(o)]),_:1}),t(d,{label:"Ticket Box Activity List",name:"3"},{default:a(()=>[e(l)=="3"?(u(),x(i,{key:0,level:e(l)},null,8,["level"])):I("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{$e as default};
