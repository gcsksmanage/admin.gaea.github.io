import{T as $,U as D,d as P,V as j,W as Q,r as k,q as I,S as Y,X as q,Y as Z,Z as ee,$ as te,a0 as ae,a1 as le,a2 as ne,o as C,c as L,f as r,w as p,b as S,g as x,y as E,u as v,F as U,I as oe,J as se,x as R,E as z,h as T,L as re,K as ie,l as O,n as ce,_ as ue,e as N,s as de,v as pe,z as fe,a3 as me,M as ve,A as ge,B as _e,C as he,D as V,G as be,H as ye}from"./entry.0506979f.js";import{_ as xe}from"./client-only.1fc8b1a6.js";/* empty css                  *//* empty css                 *//* empty css               *//* empty css                     *//* empty css                  *//* empty css                   *//* empty css                       */import{v as M,x as we}from"./adminManage.1d05d94a.js";import{t as ke}from"./throttle.46d02480.js";/* empty css                 *//* empty css                   */import"./el-tooltip.4ed993c7.js";/* empty css                      *//* empty css                   */import{s as Ce}from"./index.ee23882a.js";/* empty css                */import"./request.a38e1186.js";const B=globalThis.requestIdleCallback||(l=>{const t=Date.now(),f={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))};return setTimeout(()=>{l(f)},1)}),Te=globalThis.cancelIdleCallback||(l=>{clearTimeout(l)}),Ee=l=>{const t=$();t.isHydrating?t.hooks.hookOnce("app:suspense:resolve",()=>{B(l)}):B(l)};async function F(l,t=D()){const{path:f,matched:e}=t.resolve(l);if(!e.length||(t._routePreloaded||(t._routePreloaded=new Set),t._routePreloaded.has(f)))return;const o=t._preloadPromises=t._preloadPromises||[];if(o.length>4)return Promise.all(o).then(()=>F(l,t));t._routePreloaded.add(f);const c=e.map(a=>{var g;return(g=a.components)==null?void 0:g.default}).filter(a=>typeof a=="function");for(const a of c){const g=Promise.resolve(a()).catch(()=>{}).finally(()=>o.splice(o.indexOf(g)));o.push(g)}await Promise.all(o)}const Se=(...l)=>l.find(t=>t!==void 0),Le="noopener noreferrer";/*! @__NO_SIDE_EFFECTS__ */function Re(l){const t=l.componentName||"NuxtLink",f=(e,o)=>{if(!e||l.trailingSlash!=="append"&&l.trailingSlash!=="remove")return e;const c=l.trailingSlash==="append"?ae:le;if(typeof e=="string")return c(e,!0);const a="path"in e?e.path:o(e).path;return{...e,name:void 0,path:c(a,!0)}};return P({name:t,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(e,{slots:o}){const c=D(),a=j(()=>{const d=e.to||e.href||"";return f(d,c.resolve)}),g=j(()=>e.external||e.target&&e.target!=="_self"?!0:typeof a.value=="object"?!1:a.value===""||Q(a.value,{acceptRelative:!0})),_=k(!1),m=k(null),w=d=>{var b;m.value=e.custom?(b=d==null?void 0:d.$el)==null?void 0:b.nextElementSibling:d==null?void 0:d.$el};if(e.prefetch!==!1&&e.noPrefetch!==!0&&e.target!=="_blank"&&!Be()){const b=$();let s,n=null;I(()=>{const i=Ae();Ee(()=>{s=B(()=>{var y;(y=m==null?void 0:m.value)!=null&&y.tagName&&(n=i.observe(m.value,async()=>{n==null||n(),n=null;const h=typeof a.value=="string"?a.value:c.resolve(a.value).fullPath;await Promise.all([b.hooks.callHook("link:prefetch",h).catch(()=>{}),!g.value&&F(a.value,c).catch(()=>{})]),_.value=!0}))})})}),Y(()=>{s&&Te(s),n==null||n(),n=null})}return()=>{var i,y;if(!g.value){const h={ref:w,to:a.value,activeClass:e.activeClass||l.activeClass,exactActiveClass:e.exactActiveClass||l.exactActiveClass,replace:e.replace,ariaCurrentValue:e.ariaCurrentValue,custom:e.custom};return e.custom||(_.value&&(h.class=e.prefetchedClass||l.prefetchedClass),h.rel=e.rel),q(Z("RouterLink"),h,o.default)}const d=typeof a.value=="object"?((i=c.resolve(a.value))==null?void 0:i.href)??null:a.value||null,b=e.target||null,s=e.noRel?null:Se(e.rel,l.externalRelAttribute,d?Le:"")||null,n=()=>ne(d,{replace:e.replace});return e.custom?o.default?o.default({href:d,navigate:n,get route(){if(!d)return;const h=ee(d);return{path:h.pathname,fullPath:h.pathname,get query(){return te(h.search)},hash:h.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:d}},rel:s,target:b,isExternal:g.value,isActive:!1,isExactActive:!1}):null:q("a",{ref:m,href:d,rel:s,target:b},(y=o.default)==null?void 0:y.call(o))}}})}const Pe=Re({componentName:"NuxtLink"});function Ae(){const l=$();if(l._observer)return l._observer;let t=null;const f=new Map,e=(c,a)=>(t||(t=new IntersectionObserver(g=>{for(const _ of g){const m=f.get(_.target);(_.isIntersecting||_.intersectionRatio>0)&&m&&m()}})),f.set(c,a),t.observe(c),()=>{f.delete(c),t.unobserve(c),f.size===0&&(t.disconnect(),t=null)});return l._observer={observe:e}}function Be(){const l=navigator.connection;return!!(l&&(l.saveData||/2g/.test(l.effectiveType)))}const $e={class:"text-[#ebebeb] text-[16px] mb-5"},je={class:"text-red-500"},qe={class:"w-full flex justify-end mt-5"},Ne=P({__name:"Reject",props:{dialogVisible:{type:Boolean,default:!1},item:{default:""}},emits:["update:closeDialog","update:success"],setup(l,{emit:t}){const f=l,e=k([{value:"Repetitive or overly similar content"},{value:"Low view count"},{value:"Contains prohibited content (e.g., ads, sensitive information, etc.)"},{value:"Fails to reflect GAEA-related topics or value"},{value:"Invalid or missing images/links"},{value:"Empty text or uploaded file is blank"},{value:"Incomplete task submission"},{value:"Use of auto-generated or non-original content"},{value:"Unclear or vague language expression"}]),o=k(),c=k(!1),a=()=>{t("update:closeDialog")},g=()=>{z.confirm(`驳回用户名为：${f.item.username} 的申请`,"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{try{c.value=!0;const _=await M({id:f.item.id,status:-2});c.value=!1,_.code===200?(T.success(_.data),t("update:success"),a()):T.error(_.msg)}catch{}finally{c.value=!1}}).catch(()=>{T({type:"info",message:"canceled"})})};return(_,m)=>{const w=re,d=ie,b=O,s=ce,n=xe;return C(),L("div",null,[r(n,null,{default:p(()=>[r(s,{draggable:"","model-value":_.$props.dialogVisible,style:{"background-color":"black",border:"1px  #ebebeb solid","border-radius":"10px","padding-bottom":"30px"},title:"",width:"550px",class:"px-10","align-center":"",onClose:a},{default:p(()=>[S("p",$e,[x("驳回用户名为："),S("span",je,E(f.item.username),1),x(" 的申请")]),r(d,{modelValue:v(o),"onUpdate:modelValue":m[0]||(m[0]=i=>U(o)?o.value=i:null),clearable:"",filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"请选择驳回原因",style:{height:"32px","border-radius":"50px",width:"250px"}},{default:p(()=>[(C(!0),L(oe,null,se(v(e),(i,y)=>(C(),R(w,{key:i.value,label:`${y+1}.${i.value}`,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),S("div",qe,[r(b,{class:"w-[20%]",type:"info",onClick:m[1]||(m[1]=i=>a())},{default:p(()=>[x(" 取消 ")]),_:1}),r(b,{class:"w-[20%]",type:"success",onClick:m[2]||(m[2]=i=>("throttle"in _?_.throttle:v(ke))(()=>{g()}))},{default:p(()=>[x(" 保存 ")]),_:1})])]),_:1},8,["model-value"])]),_:1})])}}});const Ve=ue(Ne,[["__scopeId","data-v-80263eb7"]]),De={class:"w-full h-full flex flex-col space-y-2 p-6"},Ie={class:"w-full flex-1 overflow-y-auto"},Ue={class:"flex justify-end"},ze=P({__name:"Index",props:{level:{default:""}},setup(l){const t=l,f=k(),e=k(!1),o=k(!1),c=N({content:[],totalElements:0}),a=N({level:Number(t.level),page:1,limit:20}),g=s=>{a.page=s,w()},_=s=>{a.limit=s,w()},m=s=>{const y=new URL(s).pathname.split("_");return y[y.length-1]},w=async()=>{try{o.value=!0;const s={...a},n=await we(s);o.value=!1,n.code&&(c.content=n.data.map(i=>({...i,passThroughLoading:!1,rejectLoading:!1})))}catch{o.value=!1}finally{o.value=!1}},d=s=>{z.confirm(`通过用户名为：${s.username} 的申请`,"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{try{s.passThroughLoading=!0;const n=await M({id:s.id,status:2});s.passThroughLoading=!1,n.code===200?(T.success(n.data),w()):T.error(n.msg)}catch{}finally{s.passThroughLoading=!1}}).catch(()=>{T({type:"info",message:"canceled"})})},b=s=>{f.value=s,e.value=!0};return I(async()=>{await de(),w()}),(s,n)=>{const i=fe,y=me,h=Pe,H=ve,A=O,K=ge,W=_e,X=Ve,G=he;return C(),L("div",De,[S("div",Ie,[pe((C(),R(K,{ref:"multipleTableRef",height:"600px",data:v(c).content,border:"",style:{height:"100%"},"header-cell-style":{background:"#e0eeee"}},{default:p(()=>[r(i,{prop:"userid",label:"用户ID",align:"center",width:"140px",sortable:""}),r(i,{prop:"username",label:"用户名",align:"center",width:"150px","show-overflow-tooltip":"",sortable:""}),r(i,{prop:"created_time",label:"上传时间",align:"center",width:"150px",sortable:"","show-overflow-tooltip":""}),r(i,{prop:"type",label:"勋章",align:"center",sortable:""},{default:p(u=>[r(y,{type:u.row.type===1?"success":u.row.type===2?"warning":"danger",size:"small",effect:"dark"},{default:p(()=>[x(E(u.row.type===1?"一级":u.row.type===2?"二级":"三级"),1)]),_:2},1032,["type"])]),_:1}),r(i,{prop:"medal_id",label:"任务id",align:"center","min-width":"100px",sortable:""}),r(i,{prop:"code",label:"任务代号",align:"center","min-width":"120px",sortable:""}),r(i,{prop:"social_x_name",label:"社交X名称",align:"center","min-width":"130px","show-overflow-tooltip":""},{default:p(u=>[x(E(u.row.social_x_name||"未绑定"),1)]),_:1}),r(i,{prop:"social_dc_name",label:"Discord名称",align:"center","min-width":"140px","show-overflow-tooltip":""},{default:p(u=>[x(E(u.row.social_dc_name||"未绑定"),1)]),_:1}),r(i,{prop:"url",label:"文件",align:"center",width:"150","show-overflow-tooltip":""},{default:p(u=>[r(H,{class:"box-item",title:"",content:`${m(u.row.url)}`,placement:"top-start"},{reference:p(()=>[r(h,{to:u.row.url,target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4 u-line-1"},{default:p(()=>[x(E(("stringStar"in s?s.stringStar:v(Ce))({value:m(u.row.url),characters:"***",start:4,end:7})),1)]),_:2},1032,["to"])]),_:2},1032,["content"])]),_:1}),r(i,{label:"操作",width:"320",fixed:"right",align:"center"},{default:p(u=>[r(h,{to:u.row.url,target:"_blank",rel:"noopener",class:"mr-3"},{default:p(()=>[r(A,{type:"primary"},{default:p(()=>[x("查看")]),_:1})]),_:2},1032,["to"]),r(A,{type:"success",loading:u.row.passThroughLoading,onClick:J=>d(u.row)},{default:p(()=>[x("通过")]),_:2},1032,["loading","onClick"]),r(A,{type:"danger",loading:u.row.rejectLoading,onClick:J=>b(u.row)},{default:p(()=>[x("驳回")]),_:2},1032,["loading","onClick"])]),_:1})]),_:1},8,["data"])),[[G,v(o)]]),S("div",Ue,[r(W,{"current-page":v(a).page,"onUpdate:currentPage":n[0]||(n[0]=u=>v(a).page=u),"page-size":v(a).limit,"onUpdate:pageSize":n[1]||(n[1]=u=>v(a).limit=u),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:v(c).totalElements,onCurrentChange:g,onSizeChange:_},null,8,["current-page","page-size","total"])])]),r(X,{"dialog-visible":v(e),"onUpdate:closeDialog":n[2]||(n[2]=u=>e.value=!1),item:v(f),"onUpdate:success":n[3]||(n[3]=u=>w())},null,8,["dialog-visible","item"])])}}}),Oe={class:"w-full h-full flex flex-col space-y-2 p-6"},it=P({__name:"task-audit",setup(l){const t=k("2");return(f,e)=>{const o=ze,c=be,a=ye;return C(),L("div",Oe,[r(a,{modelValue:v(t),"onUpdate:modelValue":e[0]||(e[0]=g=>U(t)?t.value=g:null),class:"w-full h-full bg-black"},{default:p(()=>[r(c,{label:"等级2",name:"2"},{default:p(()=>[v(t)=="2"?(C(),R(o,{key:0,level:v(t)},null,8,["level"])):V("",!0)]),_:1}),r(c,{label:"等级3",name:"3"},{default:p(()=>[v(t)=="3"?(C(),R(o,{key:0,level:v(t)},null,8,["level"])):V("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{it as default};
