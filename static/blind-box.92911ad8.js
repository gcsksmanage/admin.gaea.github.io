import{d as S,r as d,e as _,t as T,o as m,c as k,f as l,w as a,u as e,g as b,v as f,x as w,y as R,h as B,k as j,j as A,l as L,m as q,z,A as G,C as M,p as P,a as U,b as $,_ as H}from"./entry.fb65ba9f.js";/* empty css                        *//* empty css                 *//* empty css                *//* empty css                  *//* empty css                 *//* empty css               */import"./el-tooltip.4ed993c7.js";/* empty css                     *//* empty css                   */import{g as J}from"./adminManage.c5e197f8.js";import{t as K}from"./throttle.46d02480.js";import"./request.e22fd52b.js";const O=i=>(P("data-v-5850682b"),i=i(),U(),i),Q={class:"text-[#EBEBEB] pt-10 px-5"},W={class:"cursor-pointer hover:text-[#ebebeb]"},X=O(()=>$("span",{class:"iconfont icon-icon-copy"},null,-1)),Y=S({__name:"blind-box",setup(i){const E=d(!1),c=d(!1),u=_({content:[]}),g=d(),y=d(),C=_({number:[{required:!0,message:"请输入",trigger:"blur"}]}),p=_({number:null}),F=t=>{t&&t.resetFields()},I=async t=>{t&&(c.value||await t.validate(async(o,v)=>{if(o)try{c.value=!0;const r=await J({number:p.number});r.code===200?(B.success({message:"创建成功",grouping:!0,type:"success"}),u.content=r.msg.map(([s,h])=>({cdkey:s})),y.value=u.content.map(s=>s.cdkey).join(`
`)):B.error({message:r.msg,grouping:!0,type:"error"})}catch{}finally{c.value=!1,F(t)}}))};return(t,o)=>{const v=j,r=A,s=L,h=q,V=z,D=G,x=T("copy"),N=M;return m(),k("div",Q,[l(h,{ref_key:"ruleFormRef",ref:g,inline:!0,"label-position":"right","label-width":"90px",model:e(p),rules:e(C),class:"flex w-fit"},{default:a(()=>[l(r,{label:"盲盒数:",prop:"number"},{default:a(()=>[l(v,{min:1,max:200,style:{width:"240px"},"controls-position":"right",modelValue:e(p).number,"onUpdate:modelValue":o[0]||(o[0]=n=>e(p).number=n),placeholder:"请输入需要创建的盲盒数量",clearable:""},null,8,["modelValue"])]),_:1}),l(s,{class:"w-[20%]",type:"success",loading:e(c),onClick:o[1]||(o[1]=n=>("throttle"in t?t.throttle:e(K))(()=>{I(e(g))}))},{default:a(()=>[b(" 创建 ")]),_:1},8,["loading"]),f((m(),w(s,{type:"primary"},{default:a(()=>[b(" 复制所有盲盒cdkey ")]),_:1})),[[x,e(y)]])]),_:1},8,["model","rules"]),f((m(),w(D,{ref:"multipleTableRef",height:"650px",data:e(u).content,border:""},{default:a(()=>[l(V,{prop:"cdkey",label:"cdkey",align:"center"},{default:a(n=>[f((m(),k("div",W,[b(R(n.row.cdkey)+" ",1),X])),[[x,n.row.cdkey]])]),_:1})]),_:1},8,["data"])),[[N,e(E)]])])}}});const me=H(Y,[["__scopeId","data-v-5850682b"]]);export{me as default};
