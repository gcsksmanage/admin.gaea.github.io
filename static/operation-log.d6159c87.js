import{d as z,r as g,e as C,n as j,s as A,u as a,o as n,c as i,b as l,f as v,w as N,g as U,J as h,K as x,k as D,A as P,B as S,t as u,_ as V}from"./entry.10915f71.js";/* empty css                  *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                   */import{A as T}from"./adminManage.64a87747.js";import"./request.aee2d5ca.js";const F={class:"w-full h-full text-[#EBEBEB] px-10 py-5 overflow-hidden flex flex-col"},H={class:"flex justify-end"},I={key:0,class:"w-full flex-1 overflow-y-auto"},J={class:"log-time"},K={class:"log-user"},M={class:"log-action flex flex-wrap gap-1"},Z={key:1,class:"h-[50%] text-[#EBEBEB] flex items-center justify-center"},q={class:"flex justify-end"},G=z({__name:"operation-log",setup(O){const r=g(!1),_=g(0),p=g([]),s=C({page:1,limit:10}),c=async()=>{try{r.value=!0;const t=await T(s.page,s.limit);r.value=!1,t.code==200&&(p.value=t.data,_.value=t.total)}catch{}finally{r.value=!1}},y=t=>{s.page=t,c()},B=t=>{s.limit=t,c()};j(()=>{c()});const L=t=>{const e=t.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d+/);return e?e[0]:""},b=t=>{const e=t.match(/- User \d+ [a-zA-Z0-9]+:/);return e?e[0]:""},w=t=>{const e=t.split(": ");return(e.length>1?e.slice(1).join(": "):"").split(",").map(d=>d.trim())};return(t,e)=>{const m=D,d=P,E=S;return A((n(),i("div",F,[l("div",H,[v(m,{onClick:c,type:"primary",loading:a(r)},{default:N(()=>[U("refresh")]),_:1},8,["loading"])]),a(p).length!==0?(n(),i("div",I,[(n(!0),i(h,null,x(a(p),(o,k)=>(n(),i("div",{key:k,class:"log-item"},[l("span",J,u(L(o)),1),l("span",K,u(b(o)),1),l("div",M,[(n(!0),i(h,null,x(w(o),f=>(n(),i("span",{key:f,class:"uid-tag"},u(f),1))),128))])]))),128))])):(n(),i("div",Z,"No data available")),l("div",q,[v(d,{"current-page":a(s).page,"onUpdate:currentPage":e[0]||(e[0]=o=>a(s).page=o),"page-size":a(s).limit,"onUpdate:pageSize":e[1]||(e[1]=o=>a(s).limit=o),"page-sizes":[20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:a(_),onCurrentChange:y,onSizeChange:B},null,8,["current-page","page-size","total"])])])),[[E,a(r)]])}}});const ot=V(G,[["__scopeId","data-v-70b60bb4"]]);export{ot as default};
