import{d as T,r as x,e as P,o as y,c as S,f as o,w as r,b as D,t as f,u as t,v as h,q as V,g as b,E as F,j,i as L,k as q,l as O,m as R,_ as z,n as M,s as G,x as H,y as X,z as Y,A as J,B as K,C as Q,D as W,F as Z}from"./entry.7a5a578c.js";import{_ as ee}from"./client-only.4bbb6572.js";/* empty css                        *//* empty css                 *//* empty css                *//* empty css                  *//* empty css                   */import{n as te,o as oe,p as le}from"./adminManage.defe7474.js";import{t as ae}from"./throttle.46d02480.js";/* empty css                 *//* empty css               *//* empty css                */import"./el-tooltip.4ed993c7.js";/* empty css                     *//* empty css                      *//* empty css                  *//* empty css                   */import{b as A}from"./index.a0298ae1.js";/* empty css                */import"./request.c0233501.js";const ne={class:"text-[#ebebeb] text-[16px]"},re={class:"w-full flex justify-end"},se=T({__name:"Add",props:{dialogVisible:{type:Boolean,default:!1},item:{default:null}},emits:["update:closeDialog","update:success"],setup(E,{emit:p}){const d=E,g=x(!1),c=x(),_=P({number:[{required:!0,message:"Please enter",trigger:"blur"}],duration:[{required:!0,message:"Please enter",trigger:"blur"}],price:[{required:!0,message:"Please enter",trigger:"blur"}],proportion:[{required:!0,message:"Please enter",trigger:"blur"}],putbox:[{required:!0,message:"Please enter",trigger:"blur"}],putsoul:[{required:!0,message:"Please enter",trigger:"blur"}],putmoney:[{required:!0,message:"Please enter",trigger:"blur"}]}),e=P({id:null,number:1,putmoney:300,putbox:1500,putsoul:6e3,price:.4,duration:24,proportion:50}),v=m=>{m&&m.resetFields()},U=async m=>{m&&(g.value||await m.validate(async(n,a)=>{var w;if(n)try{g.value=!0;const i={id:(w=d.item)==null?void 0:w.period_id,number:e.number,putmoney:e.putmoney*1e6,putbox:e.putbox,putsoul:e.putsoul,price:e.price*1e6,duration:e.duration*3600,proportion:e.proportion};var l=null;i.id?(delete i.number,l=await te(i)):(delete i.id,l=await oe(i)),l.code===200?(F.success({message:"Created successfully",grouping:!0,type:"success"}),p("update:success"),C()):F.error({message:l.msg,grouping:!0,type:"error"})}catch{}finally{g.value=!1,v(m)}}))},C=()=>{p("update:closeDialog"),v(c.value)},$=async()=>{var m;(m=d.item)!=null&&m.period_id&&(e.id=d.item.period_id,e.putmoney=d.item.putmoney/1e6,e.putbox=d.item.putbox,e.putsoul=d.item.putsoul,e.price=d.item.price/1e6,e.duration=d.item.duration/3600,e.proportion=d.item.proportion)};return(m,n)=>{const a=j,l=L,w=q,i=O,k=R,B=ee;return y(),S("div",null,[o(B,null,{default:r(()=>[o(k,{draggable:"","model-value":m.$props.dialogVisible,style:{"background-color":"black",border:"1px  #ebebeb solid","border-radius":"10px","padding-bottom":"30px"},title:"",width:"500px",class:"px-10","align-center":"",onClose:C,onOpen:n[9]||(n[9]=u=>$())},{default:r(()=>[D("p",ne,f(t(e).id?`Edit Epoch ${d.item.epoch_id} Era ${d.item.phase_id}`:"Add Decision Cycle"),1),o(i,{ref_key:"ruleFormRef",ref:c,class:"w-full p-5",inline:!0,"label-position":"right","label-width":"140px",model:t(e),rules:t(_)},{default:r(()=>[t(e).id?V("",!0):(y(),h(l,{key:0,label:"Number:",prop:"number",class:"w-full"},{default:r(()=>[o(a,{style:{width:"100%"},min:1,max:200,"controls-position":"right",modelValue:t(e).number,"onUpdate:modelValue":n[0]||(n[0]=u=>t(e).number=u),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1})),o(l,{label:"Duration (hours):",prop:"duration",class:"w-full"},{default:r(()=>[o(a,{style:{width:"100%"},min:0,max:100,"controls-position":"right",modelValue:t(e).duration,"onUpdate:modelValue":n[1]||(n[1]=u=>t(e).duration=u),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"Base Price (USD):",prop:"price",class:"w-full"},{default:r(()=>[o(a,{style:{width:"100%"},min:0,max:1,"controls-position":"right",modelValue:t(e).price,"onUpdate:modelValue":n[2]||(n[2]=u=>t(e).price=u),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"Base Pool (USD):",prop:"putmoney",class:"w-full"},{default:r(()=>[o(a,{style:{width:"100%"},min:0,max:1e3,"controls-position":"right",modelValue:t(e).putmoney,"onUpdate:modelValue":n[3]||(n[3]=u=>t(e).putmoney=u),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"Base Pool (BOX):",prop:"putbox",class:"w-full"},{default:r(()=>[o(a,{style:{width:"100%"},min:0,"controls-position":"right",modelValue:t(e).putbox,"onUpdate:modelValue":n[4]||(n[4]=u=>t(e).putbox=u),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"Base Pool (SOUL):",prop:"putsoul",class:"w-full"},{default:r(()=>[o(a,{style:{width:"100%"},min:0,"controls-position":"right",modelValue:t(e).putsoul,"onUpdate:modelValue":n[5]||(n[5]=u=>t(e).putsoul=u),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"User Share Ratio (%):",prop:"proportion",class:"w-full"},{default:r(()=>[o(a,{style:{width:"100%"},min:1,max:100,"controls-position":"right",modelValue:t(e).proportion,"onUpdate:modelValue":n[6]||(n[6]=u=>t(e).proportion=u),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),D("div",re,[o(w,{class:"w-[20%]",type:"info",onClick:n[7]||(n[7]=u=>C())},{default:r(()=>[b(" Cancel ")]),_:1}),o(w,{class:"w-[20%]",type:"success",loading:t(g),onClick:n[8]||(n[8]=u=>("throttle"in m?m.throttle:t(ae))(()=>{U(t(c))}))},{default:r(()=>[b(" Save ")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])]),_:1},8,["model-value"])]),_:1})])}}});const ie=z(se,[["__scopeId","data-v-10a25732"]]),ue={class:"w-full h-[75vh] flex flex-col justify-between space-y-5"},pe={key:0,class:"flex items-center justify-end"},de={class:"flex justify-end"},me=T({__name:"index",props:{status:{default:1}},setup(E){const p=E,d=x(!1),g=x({}),c=x(!1),_=P({content:[],status:0}),e=P({page:1,limit:20,status:p.status,asc:1}),v=async()=>{try{c.value=!0,p.status==1?e.asc=0:e.asc=1;const a=await le(e);c.value=!1,a.code===200?(_.content=a.data,_.totalElements=a.total):(_.content=[],_.totalElements=0,F({message:a.msg,grouping:!0,type:"error"}))}catch{c.value=!1}},U=a=>{e.page=a,v()},C=a=>(a/3600).toFixed(1),$=a=>{e.limit=a,v()},m=a=>{d.value=!0,g.value=a},n=a=>{const l=new Date(a*1e3);return`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}-${l.getDate().toString().padStart(2,"0")} ${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}:${l.getSeconds().toString().padStart(2,"0")}`};return M(()=>{v()}),(a,l)=>{const w=q,i=H,k=X,B=Y,u=J,N=ie,I=K;return y(),S("div",ue,[p.status==0?(y(),S("div",pe,[o(w,{class:"w-[100px]",type:"success",onClick:l[0]||(l[0]=s=>m(null))},{default:r(()=>[b(" Create ")]),_:1})])):V("",!0),G((y(),h(B,{ref:"multipleTableRef",class:"w-full flex-1",data:t(_).content,border:""},{default:r(()=>[o(i,{label:"Epoch-Era",align:"center"},{default:r(s=>[b(" Epoch "+f(s.row.epoch_id)+" Age "+f(s.row.phase_id)+" ("+f(C(s.row.duration))+"h) ",1)]),_:1}),o(i,{label:"Base Price (USD)",prop:"price",align:"center"},{default:r(s=>[b(f(parseFloat((s.row.price/1e6).toFixed(2)))+"U ",1)]),_:1}),o(i,{label:"Base Pool (USD)",prop:"putmoney",align:"center"},{default:r(s=>[b(f(parseFloat((s.row.putmoney/1e6).toFixed(2)))+"U ",1)]),_:1}),o(i,{label:"Base Pool (BOX)",prop:"putbox",align:"center"}),o(i,{label:"Base Pool (SOUL)",prop:"putsoul",align:"center"}),o(i,{label:"User Share Ratio (%)",prop:"proportion",align:"center"}),o(i,{prop:"eliminated",label:"Elimination",align:"center"},{default:r(s=>[b(f(("batType"in a?a.batType:t(A))(s.row.eliminated)[0]),1)]),_:1}),o(i,{prop:"mainstream",label:"Evolution",align:"center"},{default:r(s=>[b(f(("batType"in a?a.batType:t(A))(s.row.mainstream)[0]),1)]),_:1}),p.status==1?(y(),h(i,{key:0,label:"Start Time ~ End Time",align:"center","show-overflow-tooltip":""},{default:r(s=>[b(f(n(s.row.timestamp))+" ~ "+f(n(s.row.timestamp+s.row.duration)),1)]),_:1})):V("",!0),p.status==0?(y(),h(i,{key:1,label:"Action",align:"center"},{default:r(s=>[o(k,{type:"success",onClick:ge=>m(s.row)},{default:r(()=>[b("Edit")]),_:2},1032,["onClick"])]),_:1})):V("",!0)]),_:1},8,["data"])),[[I,t(c)]]),D("div",de,[o(u,{"current-page":t(e).page,"onUpdate:currentPage":l[1]||(l[1]=s=>t(e).page=s),"page-size":t(e).limit,"onUpdate:pageSize":l[2]||(l[2]=s=>t(e).limit=s),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:t(_).totalElements,onCurrentChange:U,onSizeChange:$},null,8,["current-page","page-size","total"])]),o(N,{"dialog-visible":t(d),"onUpdate:closeDialog":l[3]||(l[3]=s=>d.value=!1),"onUpdate:success":l[4]||(l[4]=s=>v()),item:t(g)},null,8,["dialog-visible","item"])])}}});const ce=z(me,[["__scopeId","data-v-5d12de36"]]),_e={class:"w-full h-full text-[#EBEBEB] pt-10 px-5"},qe=T({__name:"deep-cycle",setup(E){x(!1);const p=x("1");return(d,g)=>{const c=ce,_=W,e=Z;return y(),S("div",_e,[o(e,{modelValue:t(p),"onUpdate:modelValue":g[0]||(g[0]=v=>Q(p)?p.value=v:null),class:"w-full h-full"},{default:r(()=>[o(_,{label:"In progress",name:"1"},{default:r(()=>[t(p)=="1"?(y(),h(c,{key:0,status:t(p)},null,8,["status"])):V("",!0)]),_:1}),o(_,{label:"Not started",name:"0"},{default:r(()=>[t(p)=="0"?(y(),h(c,{key:0,status:t(p)},null,8,["status"])):V("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{qe as default};
