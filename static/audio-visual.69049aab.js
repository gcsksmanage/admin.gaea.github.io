import{d as P,r as x,e as h,o as b,c as U,f as o,w as s,b as S,t as V,u as l,g as v,E as B,h as j,i as L,j as N,k as z,l as T,m as R,_ as I,n as M,q as E,s as O,v as C,x as G,y as X,z as H,A as J,B as K,C as Q,D as W,F as Y}from"./entry.15a76552.js";import{_ as Z}from"./client-only.17f8f7d7.js";/* empty css                 *//* empty css                *//* empty css                        *//* empty css                  *//* empty css                   */import{a as ee,b as te,c as le}from"./adminManage.c8246d07.js";import{t as oe}from"./throttle.46d02480.js";/* empty css                 *//* empty css               *//* empty css                */import"./el-tooltip.4ed993c7.js";/* empty css                     *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                */import"./request.72540ff6.js";const ae={class:"text-[#ebebeb] text-[16px]"},se={class:"w-full flex justify-end"},ie=P({__name:"Add",props:{dialogVisible:{type:Boolean,default:!1},item:{default:null}},emits:["update:closeDialog","update:success"],setup(y,{emit:d}){const n=y,c=x(!1),_=x(),g=h({name:[{required:!0,message:"请输入",trigger:"blur"}],description:[{required:!0,message:"请输入",trigger:"blur"}],video:[{required:!0,message:"请输入",trigger:"blur"}],ticket:[{required:!0,message:"请输入",trigger:"blur"}],limit:[{required:!0,message:"请输入",trigger:"blur"}],soul:[{required:!0,message:"请输入",trigger:"blur"}],sxp:[{required:!0,message:"请输入",trigger:"blur"}],usd:[{required:!0,message:"请输入",trigger:"blur"}],price:[{required:!0,message:"请输入",trigger:"blur"}],duration:[{required:!0,message:"请输入",trigger:"blur"}]}),e=h({id:null,name:"",description:"",image:"",video:"",ticket:1024,limit:3,soul:10240,sxp:10240,usd:30,price:.4,duration:86400}),f=m=>{m&&m.resetFields()},$=async m=>{m&&(c.value||await m.validate(async(t,u)=>{if(t)try{c.value=!0;const i={id:n.item.id,name:e.name,description:e.description,image:e.image,video:e.video,ticket:e.ticket,limit:e.limit,soul:e.soul,sxp:e.sxp,usd:e.usd*1e6,price:e.price*1e6,duration:e.duration*3600};var r=null;i.id?r=await ee(i):(delete i.id,r=await te(i)),r.code===200?(B.success({message:"创建成功",grouping:!0,type:"success"}),d("update:success"),w()):B.error({message:r.msg,grouping:!0,type:"error"})}catch{}finally{c.value=!1,f(m)}}))},w=()=>{d("update:closeDialog"),f(_.value)},F=async()=>{n.item.id&&(e.id=n.item.id,e.name=n.item.name,e.description=n.item.description,e.image=n.item.image,e.video=n.item.video,e.ticket=n.item.period_ticket,e.limit=n.item.ticket_limit,e.soul=n.item.total_soul,e.sxp=n.item.total_sxp,e.usd=n.item.period_usd/1e6,e.price=n.item.period_price/1e6,e.duration=n.item.period_duration/3600)};return(m,t)=>{const u=j,r=L,i=N,k=z,D=T,A=R,q=Z;return b(),U("div",null,[o(q,null,{default:s(()=>[o(A,{draggable:"","model-value":m.$props.dialogVisible,style:{"background-color":"black",border:"1px  #ebebeb solid","border-radius":"10px","padding-bottom":"30px"},title:"",width:"650px",class:"px-10","align-center":"",onClose:w,onOpen:t[13]||(t[13]=a=>F())},{default:s(()=>[S("p",ae,V(l(e).id?`编辑 Phase${l(e).id}`:"新增视听周期"),1),o(D,{ref_key:"ruleFormRef",ref:_,class:"w-full p-5",inline:!0,"label-position":"right","label-width":"140px",model:l(e),rules:l(g)},{default:s(()=>[o(r,{label:"标题:",prop:"name",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).name,"onUpdate:modelValue":t[0]||(t[0]=a=>l(e).name=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"详情:",prop:"description",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).description,"onUpdate:modelValue":t[1]||(t[1]=a=>l(e).description=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"图片:",prop:"image",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).image,"onUpdate:modelValue":t[2]||(t[2]=a=>l(e).image=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"视频:",prop:"video",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).video,"onUpdate:modelValue":t[3]||(t[3]=a=>l(e).video=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"总票数:",prop:"ticket",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e4,"controls-position":"right",modelValue:l(e).ticket,"onUpdate:modelValue":t[4]||(t[4]=a=>l(e).ticket=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"限制用户投票数:",prop:"limit",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e4,"controls-position":"right",modelValue:l(e).limit,"onUpdate:modelValue":t[5]||(t[5]=a=>l(e).limit=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"底价(USD):",prop:"price",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1,"controls-position":"right",modelValue:l(e).price,"onUpdate:modelValue":t[6]||(t[6]=a=>l(e).price=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"底仓:(USD)",prop:"usd",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:200,"controls-position":"right",modelValue:l(e).usd,"onUpdate:modelValue":t[7]||(t[7]=a=>l(e).usd=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"底仓:(SOUL)",prop:"soul",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e5,"controls-position":"right",modelValue:l(e).soul,"onUpdate:modelValue":t[8]||(t[8]=a=>l(e).soul=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"底仓:(SXP)",prop:"sxp",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e5,"controls-position":"right",modelValue:l(e).sxp,"onUpdate:modelValue":t[9]||(t[9]=a=>l(e).sxp=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"时长(小时):",prop:"duration",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:100,"controls-position":"right",modelValue:l(e).duration,"onUpdate:modelValue":t[10]||(t[10]=a=>l(e).duration=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),S("div",se,[o(k,{class:"w-[20%]",type:"info",onClick:t[11]||(t[11]=a=>w())},{default:s(()=>[v(" 取消 ")]),_:1}),o(k,{class:"w-[20%]",type:"success",loading:l(c),onClick:t[12]||(t[12]=a=>("throttle"in m?m.throttle:l(oe))(()=>{$(l(_))}))},{default:s(()=>[v(" 保存 ")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])]),_:1},8,["model-value"])]),_:1})])}}});const ne=I(ie,[["__scopeId","data-v-9fd1c68a"]]),re={class:"w-full h-[75vh] flex flex-col justify-between space-y-5"},ue={key:0,class:"flex items-center justify-end"},de={class:"flex justify-end"},pe=P({__name:"index",props:{status:{default:1}},setup(y){const d=y,n=x(!1),c=x({}),_=x(!1),g=h({content:[],status:0}),e=h({page:1,limit:20,status:d.status,asc:1}),f=async()=>{try{_.value=!0,d.status==1?e.asc=0:e.asc=1;const t=await le(e);_.value=!1,t.code===200?(g.content=t.data,g.totalElements=t.total):(g.content=[],g.totalElements=0,B({message:t.msg,grouping:!0,type:"error"}))}catch{_.value=!1}},$=t=>{e.page=t,f()},w=t=>{e.limit=t,f()},F=t=>(t/3600).toFixed(0),m=t=>{n.value=!0,c.value=t};return M(()=>{f()}),(t,u)=>{const r=z,i=G,k=X,D=H,A=J,q=ne,a=K;return b(),U("div",re,[d.status==0?(b(),U("div",ue,[o(r,{class:"w-[100px]",type:"success",onClick:u[0]||(u[0]=p=>(n.value=!0,c.value={}))},{default:s(()=>[v(" 创建 ")]),_:1})])):E("",!0),O((b(),C(D,{ref:"multipleTableRef",class:"w-full flex-1",data:l(g).content,border:""},{default:s(()=>[o(i,{label:"期数",align:"center"},{default:s(p=>[v(" Phase "+V(p.row.id)+" ("+V(F(p.row.period_duration))+"h) ",1)]),_:1}),o(i,{label:"标题",prop:"name",align:"center","show-overflow-tooltip":""}),o(i,{label:"描述",prop:"description",align:"center","show-overflow-tooltip":""}),o(i,{label:"底价(USD)",prop:"period_price",align:"center"},{default:s(p=>[v(V(parseFloat((p.row.period_price/1e6).toFixed(2)))+"U ",1)]),_:1}),o(i,{label:"底仓(USD)",prop:"period_usd",align:"center"},{default:s(p=>[v(V(parseFloat((p.row.period_usd/1e6).toFixed(2)))+"U ",1)]),_:1}),o(i,{label:"底仓(SOUL)",prop:"total_soul",align:"center"}),o(i,{label:"底仓(SXP)",prop:"total_sxp",align:"center"}),o(i,{label:"限制用户投票数",prop:"ticket_limit",align:"center"}),o(i,{label:"总票数",prop:"period_ticket",align:"center"}),d.status==0?(b(),C(i,{key:0,label:"操作",align:"center"},{default:s(p=>[o(k,{type:"success",onClick:_e=>m(p.row)},{default:s(()=>[v("编辑")]),_:2},1032,["onClick"])]),_:1})):E("",!0)]),_:1},8,["data"])),[[a,l(_)]]),S("div",de,[o(A,{"current-page":l(e).page,"onUpdate:currentPage":u[1]||(u[1]=p=>l(e).page=p),"page-size":l(e).limit,"onUpdate:pageSize":u[2]||(u[2]=p=>l(e).limit=p),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:l(g).totalElements,onCurrentChange:$,onSizeChange:w},null,8,["current-page","page-size","total"])]),o(q,{"dialog-visible":l(n),"onUpdate:closeDialog":u[3]||(u[3]=p=>n.value=!1),"onUpdate:success":u[4]||(u[4]=p=>f()),item:l(c)},null,8,["dialog-visible","item"])])}}});const me=I(pe,[["__scopeId","data-v-7a1ace8b"]]),ce={class:"w-full h-full text-[#EBEBEB] pt-10 px-5"},Be=P({__name:"audio-visual",setup(y){const d=x("1");return(n,c)=>{const _=me,g=W,e=Y;return b(),U("div",ce,[o(e,{modelValue:l(d),"onUpdate:modelValue":c[0]||(c[0]=f=>Q(d)?d.value=f:null),class:"w-full h-full"},{default:s(()=>[o(g,{label:"进行中",name:"1"},{default:s(()=>[l(d)=="1"?(b(),C(_,{key:0,status:l(d)},null,8,["status"])):E("",!0)]),_:1}),o(g,{label:"未开始",name:"0"},{default:s(()=>[l(d)=="0"?(b(),C(_,{key:0,status:l(d)},null,8,["status"])):E("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{Be as default};
