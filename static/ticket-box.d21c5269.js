import{d as N,r as p,e as f,t as S,o as m,c as w,f as a,w as n,u as e,g as b,v as g,x as B,y as R,h as E,k as j,j as A,l as L,m as q,z,A as G,C as M,p as O,a as P,b as U,_ as $}from"./entry.a5dc45fd.js";/* empty css                        *//* empty css                 */import{t as H}from"./throttle.fca0157a.js";/* empty css                  *//* empty css                 *//* empty css                     *//* empty css                   */import{u as J}from"./adminManage.1d25c654.js";import"./request.b8e92f4b.js";const K=c=>(O("data-v-dbe9f176"),c=c(),P(),c),Q={class:"text-[#EBEBEB] pt-10 px-5"},W={class:"cursor-pointer hover:text-[#ebebeb]"},X=K(()=>U("span",{class:"iconfont icon-copy"},null,-1)),Y=N({__name:"ticket-box",setup(c){const C=p(!1),i=p(!1),y=p(),d=f({content:[]}),v=p(),T=f({number:[{required:!0,message:"请输入票盒数量",trigger:"blur"}]}),u=f({number:null}),F=t=>{t&&t.resetFields()},I=async t=>{t&&(i.value||await t.validate(async(o,h)=>{if(o)try{i.value=!0;const s=await J({number:u.number});s.code===200?(E.success({message:"创建成功",grouping:!0,type:"success"}),d.content=s.msg.map(([r,_])=>({cdkey:r,numberOfTimes:_})),y.value=d.content.map(r=>r.cdkey).join(",")):E.error({message:s.msg,grouping:!0,type:"error"})}catch{}finally{i.value=!1,F(t)}}))};return(t,o)=>{const h=j,s=A,r=L,_=q,k=z,V=G,x=S("copy"),D=M;return m(),w("div",Q,[a(_,{ref_key:"ruleFormRef",ref:v,inline:!0,"label-position":"right","label-width":"90px",model:e(u),rules:e(T),class:"flex w-fit"},{default:n(()=>[a(s,{label:"票盒数:",prop:"number"},{default:n(()=>[a(h,{min:1,max:200,style:{width:"240px"},"controls-position":"right",modelValue:e(u).number,"onUpdate:modelValue":o[0]||(o[0]=l=>e(u).number=l),placeholder:"请输入需要创建的票盒数量",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{class:"w-[20%]",type:"success",loading:e(i),onClick:o[1]||(o[1]=l=>("throttle"in t?t.throttle:e(H))(()=>{I(e(v))}))},{default:n(()=>[b(" 创建 ")]),_:1},8,["loading"]),g((m(),B(r,{type:"primary"},{default:n(()=>[b(" 复制所有票盒cdkey ")]),_:1})),[[x,e(y)]])]),_:1},8,["model","rules"]),g((m(),B(V,{ref:"multipleTableRef",height:"650px",data:e(d).content,border:""},{default:n(()=>[a(k,{prop:"cdkey",label:"cdkey",align:"center"},{default:n(l=>[g((m(),w("div",W,[b(R(l.row.cdkey)+" ",1),X])),[[x,l.row.cdkey]])]),_:1}),a(k,{prop:"numberOfTimes",label:"次数",align:"center"})]),_:1},8,["data"])),[[D,e(C)]])])}}});const ie=$(Y,[["__scopeId","data-v-dbe9f176"]]);export{ie as default};
