import{d as T,r as V,e as k,o as b,c as h,f as o,w as s,b as F,t as w,u as l,g as v,E as S,h as z,i as L,j as N,k as q,l as j,m as R,_ as I,n as M,q as U,s as O,v as E,x as G,y as X,z as H,A as J,B as K,C as Q,D as W,F as Y}from"./entry.7a5a578c.js";import{_ as Z}from"./client-only.4bbb6572.js";/* empty css                 *//* empty css                *//* empty css                        *//* empty css                  *//* empty css                   */import{a as ee,b as te,c as le}from"./adminManage.defe7474.js";import{t as oe}from"./throttle.46d02480.js";/* empty css                 *//* empty css               *//* empty css                */import"./el-tooltip.4ed993c7.js";/* empty css                     *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                */import"./request.c0233501.js";const ae={class:"text-[#ebebeb] text-[16px]"},se={class:"w-full flex justify-end"},ie=T({__name:"Add",props:{dialogVisible:{type:Boolean,default:!1},item:{default:null}},emits:["update:closeDialog","update:success"],setup(y,{emit:d}){const n=y,c=V(!1),_=V(),g=k({name:[{required:!0,message:"Please enter",trigger:"blur"}],description:[{required:!0,message:"Please enter",trigger:"blur"}],video:[{required:!0,message:"Please enter",trigger:"blur"}],ticket:[{required:!0,message:"Please enter",trigger:"blur"}],limit:[{required:!0,message:"Please enter",trigger:"blur"}],soul:[{required:!0,message:"Please enter",trigger:"blur"}],sxp:[{required:!0,message:"Please enter",trigger:"blur"}],usd:[{required:!0,message:"Please enter",trigger:"blur"}],price:[{required:!0,message:"Please enter",trigger:"blur"}],duration:[{required:!0,message:"Please enter",trigger:"blur"}]}),e=k({id:null,name:"",description:"",image:"",video:"",ticket:1024,limit:3,soul:10240,sxp:10240,usd:30,price:.4,duration:86400}),f=m=>{m&&m.resetFields()},C=async m=>{m&&(c.value||await m.validate(async(t,u)=>{if(t)try{c.value=!0;const i={id:n.item.id,name:e.name,description:e.description,image:e.image,video:e.video,ticket:e.ticket,limit:e.limit,soul:e.soul,sxp:e.sxp,usd:e.usd*1e6,price:e.price*1e6,duration:e.duration*3600};var r=null;i.id?r=await ee(i):(delete i.id,r=await te(i)),r.code===200?(S.success({message:"Created successfully",grouping:!0,type:"success"}),d("update:success"),x()):S.error({message:r.msg,grouping:!0,type:"error"})}catch{}finally{c.value=!1,f(m)}}))},x=()=>{d("update:closeDialog"),f(_.value)},B=async()=>{n.item.id&&(e.id=n.item.id,e.name=n.item.name,e.description=n.item.description,e.image=n.item.image,e.video=n.item.video,e.ticket=n.item.period_ticket,e.limit=n.item.ticket_limit,e.soul=n.item.total_soul,e.sxp=n.item.total_sxp,e.usd=n.item.period_usd/1e6,e.price=n.item.period_price/1e6,e.duration=n.item.period_duration/3600)};return(m,t)=>{const u=z,r=L,i=N,P=q,D=j,A=R,$=Z;return b(),h("div",null,[o($,null,{default:s(()=>[o(A,{draggable:"","model-value":m.$props.dialogVisible,style:{"background-color":"black",border:"1px  #ebebeb solid","border-radius":"10px","padding-bottom":"30px"},title:"",width:"650px",class:"px-10","align-center":"",onClose:x,onOpen:t[13]||(t[13]=a=>B())},{default:s(()=>[F("p",ae,w(l(e).id?`Edit Phase ${l(e).id}`:"Add Audiovisual Cycle"),1),o(D,{ref_key:"ruleFormRef",ref:_,class:"w-full p-5",inline:!0,"label-position":"right","label-width":"140px",model:l(e),rules:l(g)},{default:s(()=>[o(r,{label:"Title:",prop:"name",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).name,"onUpdate:modelValue":t[0]||(t[0]=a=>l(e).name=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Description:",prop:"description",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).description,"onUpdate:modelValue":t[1]||(t[1]=a=>l(e).description=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Image:",prop:"image",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).image,"onUpdate:modelValue":t[2]||(t[2]=a=>l(e).image=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Video:",prop:"video",class:"w-full"},{default:s(()=>[o(u,{style:{width:"100%"},"controls-position":"right",modelValue:l(e).video,"onUpdate:modelValue":t[3]||(t[3]=a=>l(e).video=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Total Tickets:",prop:"ticket",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e4,"controls-position":"right",modelValue:l(e).ticket,"onUpdate:modelValue":t[4]||(t[4]=a=>l(e).ticket=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"User Vote Limit:",prop:"limit",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e4,"controls-position":"right",modelValue:l(e).limit,"onUpdate:modelValue":t[5]||(t[5]=a=>l(e).limit=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Base Price (USD):",prop:"price",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1,"controls-position":"right",modelValue:l(e).price,"onUpdate:modelValue":t[6]||(t[6]=a=>l(e).price=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Base Pool (USD):",prop:"usd",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:200,"controls-position":"right",modelValue:l(e).usd,"onUpdate:modelValue":t[7]||(t[7]=a=>l(e).usd=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Base Pool (SOUL):",prop:"soul",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e5,"controls-position":"right",modelValue:l(e).soul,"onUpdate:modelValue":t[8]||(t[8]=a=>l(e).soul=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Base Pool (SXP):",prop:"sxp",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:1e5,"controls-position":"right",modelValue:l(e).sxp,"onUpdate:modelValue":t[9]||(t[9]=a=>l(e).sxp=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"Duration (hours):",prop:"duration",class:"w-full"},{default:s(()=>[o(i,{style:{width:"100%"},min:0,max:100,"controls-position":"right",modelValue:l(e).duration,"onUpdate:modelValue":t[10]||(t[10]=a=>l(e).duration=a),placeholder:"Please enter",clearable:""},null,8,["modelValue"])]),_:1}),F("div",se,[o(P,{class:"w-[20%]",type:"info",onClick:t[11]||(t[11]=a=>x())},{default:s(()=>[v(" Cancel ")]),_:1}),o(P,{class:"w-[20%]",type:"success",loading:l(c),onClick:t[12]||(t[12]=a=>("throttle"in m?m.throttle:l(oe))(()=>{C(l(_))}))},{default:s(()=>[v(" Save ")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])]),_:1},8,["model-value"])]),_:1})])}}});const ne=I(ie,[["__scopeId","data-v-52b7362e"]]),re={class:"w-full h-[75vh] flex flex-col justify-between space-y-5"},ue={key:0,class:"flex items-center justify-end"},de={class:"flex justify-end"},pe=T({__name:"index",props:{status:{default:1}},setup(y){const d=y,n=V(!1),c=V({}),_=V(!1),g=k({content:[],status:0}),e=k({page:1,limit:20,status:d.status,asc:1}),f=async()=>{try{_.value=!0,d.status==1?e.asc=0:e.asc=1;const t=await le(e);_.value=!1,t.code===200?(g.content=t.data,g.totalElements=t.total):(g.content=[],g.totalElements=0,S({message:t.msg,grouping:!0,type:"error"}))}catch{_.value=!1}},C=t=>{e.page=t,f()},x=t=>{e.limit=t,f()},B=t=>(t/3600).toFixed(0),m=t=>{n.value=!0,c.value=t};return M(()=>{f()}),(t,u)=>{const r=q,i=G,P=X,D=H,A=J,$=ne,a=K;return b(),h("div",re,[d.status==0?(b(),h("div",ue,[o(r,{class:"w-[100px]",type:"success",onClick:u[0]||(u[0]=p=>(n.value=!0,c.value={}))},{default:s(()=>[v(" Create ")]),_:1})])):U("",!0),O((b(),E(D,{ref:"multipleTableRef",class:"w-full flex-1",data:l(g).content,border:""},{default:s(()=>[o(i,{label:"Period",align:"center"},{default:s(p=>[v(" Phase "+w(p.row.id)+" ("+w(B(p.row.period_duration))+"h) ",1)]),_:1}),o(i,{label:"Title",prop:"name",align:"center","show-overflow-tooltip":""}),o(i,{label:"Description",prop:"description",align:"center","show-overflow-tooltip":""}),o(i,{label:"Base Price (USD)",prop:"period_price",align:"center"},{default:s(p=>[v(w(parseFloat((p.row.period_price/1e6).toFixed(2)))+"U ",1)]),_:1}),o(i,{label:"Base Pool (USD)",prop:"period_usd",align:"center"},{default:s(p=>[v(w(parseFloat((p.row.period_usd/1e6).toFixed(2)))+"U ",1)]),_:1}),o(i,{label:"Base Pool (SOUL)",prop:"total_soul",align:"center"}),o(i,{label:"Base Pool (SXP)",prop:"total_sxp",align:"center"}),o(i,{label:"User Vote Limit",prop:"ticket_limit",align:"center"}),o(i,{label:"Total Tickets",prop:"period_ticket",align:"center"}),d.status==0?(b(),E(i,{key:0,label:"Action",align:"center"},{default:s(p=>[o(P,{type:"success",onClick:_e=>m(p.row)},{default:s(()=>[v("Edit")]),_:2},1032,["onClick"])]),_:1})):U("",!0)]),_:1},8,["data"])),[[a,l(_)]]),F("div",de,[o(A,{"current-page":l(e).page,"onUpdate:currentPage":u[1]||(u[1]=p=>l(e).page=p),"page-size":l(e).limit,"onUpdate:pageSize":u[2]||(u[2]=p=>l(e).limit=p),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:l(g).totalElements,onCurrentChange:C,onSizeChange:x},null,8,["current-page","page-size","total"])]),o($,{"dialog-visible":l(n),"onUpdate:closeDialog":u[3]||(u[3]=p=>n.value=!1),"onUpdate:success":u[4]||(u[4]=p=>f()),item:l(c)},null,8,["dialog-visible","item"])])}}});const me=I(pe,[["__scopeId","data-v-f0918c86"]]),ce={class:"w-full h-full text-[#EBEBEB] pt-10 px-5"},Se=T({__name:"audio-visual",setup(y){const d=V("1");return(n,c)=>{const _=me,g=W,e=Y;return b(),h("div",ce,[o(e,{modelValue:l(d),"onUpdate:modelValue":c[0]||(c[0]=f=>Q(d)?d.value=f:null),class:"w-full h-full"},{default:s(()=>[o(g,{label:"In progress",name:"1"},{default:s(()=>[l(d)=="1"?(b(),E(_,{key:0,status:l(d)},null,8,["status"])):U("",!0)]),_:1}),o(g,{label:"Not started",name:"0"},{default:s(()=>[l(d)=="0"?(b(),E(_,{key:0,status:l(d)},null,8,["status"])):U("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{Se as default};
