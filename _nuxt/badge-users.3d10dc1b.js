import{d as S,r as w,e as I,o as f,c as E,f as e,w as a,u as l,b as U,g as h,E as P,h as D,i as j,j as H,k as A,l as z,m as L,n as O,p as q,a as G,_ as K,q as W,s as J,t as Q,v as B,x as V,y as N,z as X,A as Y,B as Z,C as ee,D as T,F as le,G as te,H as ae}from"./entry.0ba19b1b.js";import{_ as oe}from"./client-only.a914c7a4.js";/* empty css                 */import{t as se}from"./throttle.1d0e35fd.js";/* empty css                        *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                       */import{a as ne,b as re}from"./adminManage.52619c96.js";/* empty css                 *//* empty css                     *//* empty css                   */import{s as ie}from"./index.6d85b2d4.js";/* empty css                */import"./request.b1438f49.js";const ce=v=>(q("data-v-4c791cff"),v=v(),G(),v),de=ce(()=>U("p",{class:"text-[#ebebeb] text-[16px] mb-5 ml-3"},"奖励发放",-1)),ue={class:"w-full flex justify-end"},pe=S({__name:"Rewards",props:{dialogVisible:{type:Boolean,default:!1},uid:{default:""},level:{default:2}},emits:["update:closeDialog","update:success"],setup(v,{emit:o}){const i=v,m=w(!1),c=I({uids:i.uid,soul:0,box:0,usd:0}),b=()=>{o("update:closeDialog")},u=async()=>{P.confirm("please confirm?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{try{try{m.value=!0;const{soul:p,box:s,usd:y}=c,x=await ne({uids:i.uid,soul:p,box:s,usd:y,medal_type:Number(i.level)});x.code===200?(o("update:success",i.uid),b(),D.success({message:"发放成功"})):D.error({message:x.msg})}catch(p){console.dir(p)}}catch(p){console.dir(p),m.value=!1}finally{m.value=!1}}).catch(()=>{D({type:"info",message:"canceled"})})},_=async()=>{};return(p,s)=>{const y=j,x=H,C=A,t=z,n=L,d=O,k=oe;return f(),E("div",null,[e(k,null,{default:a(()=>[e(d,{draggable:"","model-value":p.$props.dialogVisible,style:{"background-color":"black",border:"1px  #ebebeb solid","border-radius":"10px","padding-bottom":"30px"},title:"",width:"500px",class:"pl-12","align-center":"",onClose:b,onOpen:s[4]||(s[4]=g=>_())},{default:a(()=>[de,e(n,{ref:"ruleFormRef",inline:!0,"label-position":"right","label-width":"90px",model:l(c),class:"flex flex-col w-fit"},{default:a(()=>[e(x,{label:"用户ID:",prop:"uids",class:"w-[340px]"},{default:a(()=>[e(y,{modelValue:i.uid,"onUpdate:modelValue":s[0]||(s[0]=g=>i.uid=g),placeholder:"请输入",clearable:"",disabled:""},null,8,["modelValue"])]),_:1}),e(x,{label:"盲盒数:",prop:"box"},{default:a(()=>[e(C,{min:0,max:200,"controls-position":"right",modelValue:l(c).box,"onUpdate:modelValue":s[1]||(s[1]=g=>l(c).box=g),placeholder:"请输入",clearable:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(x,{label:"USD:",prop:"number"},{default:a(()=>[e(C,{min:0,max:1e3,"controls-position":"right",modelValue:l(c).usd,"onUpdate:modelValue":s[2]||(s[2]=g=>l(c).usd=g),placeholder:"请输入",clearable:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),U("div",ue,[e(t,{type:"success",class:"hover:scale-105",onClick:s[3]||(s[3]=g=>("throttle"in p?p.throttle:l(se))(()=>{u()}))},{default:a(()=>[h(" 发放 ")]),_:1})])]),_:1},8,["model"])]),_:1},8,["model-value"])]),_:1})])}}});const me=K(pe,[["__scopeId","data-v-4c791cff"]]),_e={class:"w-full flex flex-col space-y-2 p-6"},fe={class:"w-full flex-1 overflow-y-auto"},be={class:"cursor-pointer hover:text-[#ebebeb]"},ge={class:"cursor-pointer hover:text-[#ebebeb]"},ve={class:"flex justify-end"},xe=S({__name:"index",props:{level:{default:""}},setup(v){const o=v,i=w(!1),m=w(!1),c=w(""),b=w({}),u=I({level:Number(o.level),page:1,limit:20}),_=I({content:[],totalElements:0}),p=t=>{u.page=t,y()},s=t=>{u.limit=t,y()},y=async()=>{try{const t={...u};i.value=!0;const n=await re(t);i.value=!1,n.code===200?(_.content=n.data.map(d=>({...d,loading:!1})),_.totalElements=n.total):(_.content=[],_.totalElements=0,D({message:n.msg,grouping:!0,type:"error"}))}catch(t){i.value=!1,console.log(t)}},x=t=>{m.value=!0,c.value=t.userid,b.value=t},C=t=>{b.value.status=1,Number(o.level)===2&&(b.value.blindbox+=100)};return W(async()=>{await J(),y()}),(t,n)=>{const d=X,k=z,g=Y,R=Z,F=me,$=Q("copy"),M=ee;return f(),E("div",_e,[U("div",fe,[B((f(),V(g,{ref:"multipleTableRef",height:"600px",data:l(_).content,border:""},{default:a(()=>[e(d,{prop:"userid",label:"用户ID",align:"center"},{default:a(r=>[B((f(),E("div",be,[h(N(r.row.userid),1)])),[[$,r.row.userid]])]),_:1}),e(d,{prop:"blindbox",label:"当前盲盒数",align:"center"}),e(d,{prop:"username",label:"用户名",align:"center"}),e(d,{prop:"eth_address",label:"钱包地址",align:"center"},{default:a(r=>[B((f(),E("div",ge,[h(N(("stringStar"in t?t.stringStar:l(ie))({value:r.row.eth_address,characters:"***",start:4})),1)])),[[$,r.row.eth_address]])]),_:1}),e(d,{prop:"social_x_name",label:"social_x_name",align:"center"}),e(d,{prop:"social_dc_name",label:"social_dc_name",align:"center"}),e(d,{prop:"count",label:"完成任务数",align:"center"}),e(d,{label:"操作",width:"320",fixed:"right",align:"center"},{default:a(r=>[r.row.status===0?(f(),V(k,{key:0,type:"success",onClick:we=>x(r.row)},{default:a(()=>[h(" 发放 ")]),_:2},1032,["onClick"])):(f(),V(k,{key:1,type:"success",disabled:""},{default:a(()=>[h(" 已发 ")]),_:1}))]),_:1})]),_:1},8,["data"])),[[M,l(i)]])]),U("div",ve,[e(R,{"current-page":l(u).page,"onUpdate:currentPage":n[0]||(n[0]=r=>l(u).page=r),"page-size":l(u).limit,"onUpdate:pageSize":n[1]||(n[1]=r=>l(u).limit=r),"page-sizes":[20,50,100,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:l(_).totalElements,onCurrentChange:p,onSizeChange:s},null,8,["current-page","page-size","total"])]),e(F,{"dialog-visible":l(m),uid:l(c),level:o.level,"onUpdate:success":C,"onUpdate:closeDialog":n[2]||(n[2]=r=>m.value=!1)},null,8,["dialog-visible","uid","level"])])}}}),ye={class:"w-full h-full flex flex-col space-y-2 p-6"},Me=S({__name:"badge-users",setup(v){const o=w("2");return(i,m)=>{const c=xe,b=te,u=ae;return f(),E("div",ye,[e(u,{modelValue:l(o),"onUpdate:modelValue":m[0]||(m[0]=_=>le(o)?o.value=_:null),class:"w-full h-full bg-black"},{default:a(()=>[e(b,{label:"等级2",name:"2"},{default:a(()=>[l(o)=="2"?(f(),V(c,{key:0,level:l(o)},null,8,["level"])):T("",!0)]),_:1}),e(b,{label:"等级3",name:"3"},{default:a(()=>[l(o)=="3"?(f(),V(c,{key:0,level:l(o)},null,8,["level"])):T("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{Me as default};
